{% extends "base.html.twig" %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('css/commande.css') }}" rel="stylesheet"/>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/panier.js') }}"></script>
{% endblock %}

{% block body %}

    <h1 class="title">{% trans %}Récapitulatif des commandes{% endtrans %}</h1>
<div class="table-responsive tab-commande">
    <table class="table table-hover">
        <thead class="thead-default">
        <tr class="color-title">

            <th class="col-xs-1">{% trans %}Nom du vin{% endtrans %}</th>
            <th class="col-xs-1">{% trans %}Image{% endtrans %}</th>
            <th class="col-xs-6">{% trans %}Description{% endtrans %}</th>
            <th class="col-xs-1">{% trans %}Prix HT{% endtrans %}</th>
            <th class="col-xs-1">{% trans %}Quantité{% endtrans %}</th>
            <th class="col-xs-1">{% trans %}TVA{% endtrans %}</th>
            <th class="col-xs-1">{% trans %}Prix TTC{% endtrans %}</th>
            <th class="col-xs-1">{% trans %}Livraison{% endtrans %}</th>
        </tr>
        </thead>
        <tbody>
        {% for productPurchase in commande.products %}
            <tr>
                <td>{{ productPurchase.conditioningType.product.name }} - {{ productPurchase.conditioningType.name }}</td>
                {% for product_picture in productPurchase.conditioningType.product.pictures %}
                    <td><img class="post-entry-cover" src="/upload/{{ product_picture.url }}" alt="{{ product_picture.alt }}" /> </td>
                {% endfor %}
                <td><span class="height_description">{{ productPurchase.conditioningType.product.description }}</span></td>
                <td>{{ (productPurchase.conditioningType.price )|round(2) }}€</td>
                <td>{{ productPurchase.stock}}</td>
                <td>{{ tva }}%</td>
                <td>{{ (( productPurchase.conditioningType.price *(1+tva/100)) * productPurchase.stock)|round(2) }}€</td>
                <td>{{ productPurchase.delivery.nameAndPrice(productPurchase.Stock) }}</td>
            </tr>
        {% endfor %}
        <tr>
            <td colspan="6"></td>
            <td>{% trans %}Prix total TTC{% endtrans %}</td>
            <td>{{ (commande.amount*(1+tva/100))|round(2) + commande.totalShipping }}€</td>
        </tr>
        <tr>
            <td colspan="5"></td>
            <td>{% trans %}Moyens de Paiement{% endtrans %}</td>
            <td><a href="{{ path('pay_cart', {'id' : commande.id}) }}"><img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_37x23.jpg" alt="Payer avec Paypal"></a>
            </td>
        </tr>

        </tbody>
    </table>
</div>


{% endblock %}
